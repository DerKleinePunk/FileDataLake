<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>File Data Lake - Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body class="container d-flex justify-content-center align-items-center bg-dark">
    <div id="main-container" class="card">
        <div class="card-header">
            <h1>Willkommen zum Dateiarchiv</h1>
        </div>
        <div class="card-body">
            <div id="desciption">
                <p>Willkommen zum Dateiarchiv! Laden Sie Ihre Dateien hoch und verwalten Sie sie sicher in unserem Data
                    Lake.</p>
                <p>Dies ist ein Projekt im Rahmen des Minihackathon 3.0 von Kevin Chromik.</p>
                <p>The little Punk und Plikoener haben ein Datenspeicher mit per PhytonScript konfiguierbaren Filtern in
                    der Programmsprache Rust erstellt. Das Frontend wurde mit Bootstrap realisiert.</p>
                <p>Es lassen sich bis zum 10 MB Große Dokumente hochladen. </p>
            </div>
            <div id="filecount">
                <table class="table table-bordered">
                    <tr>
                        <td><strong>Derzeit gespeicherte Dateien:</strong></td>
                        <td id="file-count-cell"></td>
                        <script>
                            let countURI = '/api/file/count';
                            let countFakeURI = 'fakefilecount.html';
                            fetch(countURI)
                                .then(response => response.json())
                                .then(data => {
                                    document.getElementById('file-count-cell').innerText = data.count;
                                })
                                .catch(error => {
                                    console.error('Fehler beim Abrufen der Dateianzahl:', error);
                                    document.getElementById('file-count-cell').innerText = 'Nicht verfügbar';
                                });
                        </script>
                    </tr>
                </table>
            </div>
        </div>
        <div class="card-footer">
            <!-- dem Button werden zwei Klassen btn und btn-primary hinzugefügt, im HTML werden diese durch Leerzeichen getrennt-->
            <button id="upload-button" class="btn btn-primary" onclick="showUpload()">Hochladen</button>
            <button id="analyse-button" class="btn btn-primary" onclick="showAnalyseWahl()">Zu Analyse</button>
        </div>
    </div>
    <div id="upload-container" hidden="true" class="card">
        <div class="card-header">
            <h2>Datei hochladen</h2>
        </div>
        <div class="card-body">
            <div id="upload-form">
                <form action="/api/file/save" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="formFile" class="form-label">Wählen Sie eine Datei zum Hochladen aus:</label>
                        <input class="form-control" type="file" id="formFile" name="file">
                        <!-- <input type="file" id="myFile" name="file">-->
                    </div>
                    <!-- <button type="button" class="btn btn-success" onclick="uploadFile()">Hochladen</button> -->
                    <input class="btn btn-success" type="submit">

                </form>


            </div>
        </div>
        <div class="card-footer">
            <button id="main-button" class="btn btn-primary" onclick="showMain()">zurück</button>
        </div>
    </div>
    <div id="analyse-wahl-container" hidden="true" class="card">
        <div class="card-header">
            <h2>Analyse auswählen</h2>
        </div>
        <div class="card-body">
            <div id="analyse-options" class="d-grid gap-2 d-md-block">

                
            </div>
            <div class="d-grid gap-2" id="analyse-options2">
                <button class="btn btn-info" onclick="location.href='analyse.html'">Einfache Analyse</button>
                <button class="btn btn-info" onclick="location.href='advanced_analyse.html'">Erweiterte Analyse</button>
                <button class="btn btn-primary" type="button" data-bs-toggle="tooltip" data-bs-placement="right" title="Tooltip on right">Button</button>
                <button class="btn btn-primary" type="button">Button</button>
                <button class="btn btn-info" onclick="showResult()">Zum Ergebnis</button>
            </div>
        </div>
        <div class="card-footer">
            <button id="main-button-2" class="btn btn-primary" onclick="showMain()">zurück</button>
        </div>
    </div>
    <!-- Erstelle weiteren Container für eine Ergebnisanzeige in Tabellenform -->
    <div id="result-container" hidden="true" class="card">
        <div class="card-header">
            <h2>Analyseergebnisse</h2>
        </div>
        <div class="card-body">
            <div id="result-table">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Dateiname</th>
                            <th>Dateigröße (Bytes)</th>
                            <th>Hochgeladen am</th>
                            <th>Download</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body">
                         <tr>
                            <td>Beispiel.txt</td>
                            <td>2048</td>
                            <td>2024-06-15 10:30:00</td>
                            <td><a href="/api/file/download/Beispiel.txt" class="btn btn-sm btn-success">Download</a></td>
                        <!-- Ergebnisse werden hier dynamisch eingefügt -->
                    </tbody>
                </table>
            </div>
        </div>
        <div class="card-footer">
            <button id="main-button-3" class="btn btn-primary" onclick="showMain()">zurück</button>
        </div>
</body>
<script src="navigation.js"></script>
<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
<!-- A simple, lightweight JavaScript API for handling cookies https://www.jsdelivr.com/package/npm/js-cookie-->

</html>